<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
</head>
<body>
    <div style="display: grid; grid-template-columns: 3fr 1fr; background-color: #422877;">
        <div>
            <svg id="main_map" width="100%" height="1500" xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(206, 236, 234);"></svg>
        </div>
        <div id="right_column_div" style="z-index: 10; background-color: #8685B2; color: #D7C188">
            <input id="attributes" type="text">
            <button onclick="get_map()">
                get map
            </button>
            <br>
            <p>
                <hr>
                {
                    "countries": {
                        "width": "0.1%",
                        "opacity": "0.5",
                        "color1": "random",
                        "color2": "random",
                        "name": 17,
                        "chosen": [
                            "all"
                        ]
                    },
                    "rivers": {
                        "width": "0.02%",
                        "opacity": "1",
                        "color1": "#97d0fc",
                        "color2": "#77b0dc",
                        "name": 2,
                        "chosen": [
                            "all"
                        ]
                    },
                    "lakes": {
                        "width": "0.02%",
                        "opacity": "1",
                        "color1": "#97d0fc",
                        "color2": "#77b0dc",
                        "name": 2,
                        "chosen": [
                            "all"
                        ]
                    }
                }
                <hr>
                {
                    "countries": {
                        "width": "0.1%",
                        "opacity": "0.5",
                        "color1": "random",
                        "color2": "random",
                        "name": 17,
                        "chosen": [
                            "all"
                        ]
                    }
                }
                <hr>
            </p>
        </div>
    </div>

    <p> Made with Natural Earth. Free vector and raster map data <a href="https://www.naturalearthdata.com">naturalearthdata.com</a></p>
    <a href="https://www.naturalearthdata.com">
        <img src="/static/logo/naturalearthdata.png">
    </a>
    <a href="https://github.com/anvaka/panzoom">
        Panzoom github
    </a>

    <script src='/static/js/panzoom.min.js'></script>
    <script>
        panzoom(document.getElementById("main_map"), {minZoom: 1, bounds: true, boundsPadding: 1})

        document.body.requestFullscreen();

        function change_visible(id)
        {
            var div = document.getElementById(id + "_div");
            if (div.style.display == "block")
            {
                div.style.display = "none";
            }
            else
            {
                div.style.display = "block";
            }
        }

        function change_width() {

        }

        function get_map()
        {
            var attrs = document.getElementById("attributes");
            var map = document.getElementById("main_map");

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/get_map', true);
            console.log(attrs.value)
            xhr.send(attrs.value);
            xhr.onload = function()
            {
                console.log("кукареку");
                console.log(xhr.responseText);
                map.innerHTML += xhr.responseText;
            };
        }
    
        function Kaboom() {
            var pols = document.getElementsByTagName("polygon");

            for (var i = 0; i < pols.length; i++)
            {
                var pol = pols[i];

                pol.setAttribute("style", "clip-path: polygon(" +  "10 10,500 10, 500 500,10 500" + ")");

                console.log(pol.getAttribute("points"));
            }

            console.log("Finish...");
        }
    </script>
</body>
</html>